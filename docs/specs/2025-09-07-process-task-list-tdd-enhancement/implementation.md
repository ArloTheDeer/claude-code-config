# 實作計畫

## PRD 參考

**PRD 文件路徑：** `docs/specs/2025-09-07-process-task-list-tdd-enhancement/prd.md`

> **重要提醒：** 實作過程中請經常參考 PRD 文件以了解：
>
> - 功能的商業目標和用戶價值
> - 完整的用戶故事和使用場景
> - 非功能性需求（性能、安全性等）
> - 系統架構和技術決策的背景脈絡

## 相關檔案

- `commands/process-task-list.md` - 需要增強的主要命令檔案，包含任務管理和 TDD 工作流程
- `scripts/install-config.js` - 安裝腳本，用於部署更新後的命令到 Claude Code 環境  
- `docs/specs/2025-09-07-process-task-list-tdd-enhancement/acceptance.feature` - Gherkin 格式的驗收測試場景

## 任務

- [x] 1. 增強命令文件中的 TDD 任務識別邏輯
  - 1.1 修改 process-task-list.md 中的任務處理指引，加入 TDD 任務標註檢測說明
  - 1.2 定義 TDD 任務自動分解為 7 個子任務的規則（先跑測試、寫空介面、寫測試敘述、實作測試邏輯、跑測試紅燈、實作實際程式碼、再次跑測試綠燈）
  - 1.3 規範子任務必須按順序執行且同時只有一個處於 in_progress 狀態的行為

- [x] 2. 更新動態任務展開機制的指引
  - 2.1 在命令文件中明確說明任務展開控制邏輯：只在 TDD 任務標記為 in_progress 時才展開為 7 個子任務
  - 2.2 定義延遲展開機制規範：未開始的 TDD 任務保持單一任務形式，等到執行時才展開
  - 2.3 說明母任務與子任務的狀態關聯機制

- [x] 3. 更新簡化同步機制的說明
  - 3.1 修改命令文件中的同步機制說明：從 implementation.md → TodoWrite（TDD 任務展開）
  - 3.2 明確定義子任務完成檢查規則：確保所有子任務完成後才將母任務標記為完成
  - 3.3 強調 TDD 子任務僅在 TodoWrite 中管理，不同步回 implementation.md

- [x] 4. 驗證非 TDD 任務的向後相容性說明
  - 4.1 確認命令文件中明確說明沒有 TDD 標註的任務保持原有處理方式
  - 4.2 補充混合任務清單（TDD 和非 TDD 任務）的處理說明
  - 4.3 確認所有現有功能（git commit、檔案管理等）的說明保持不變

- [x] 5. 完善命令文件的使用指引和範例
  - 5.1 更新 process-task-list.md 中的使用說明，加入 TDD 任務分解功能的詳細說明
  - 5.2 新增具體的使用範例，展示 TDD 任務如何展開和管理
  - 5.3 提供最佳實作建議和常見問題說明
